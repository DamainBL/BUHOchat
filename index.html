<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página con Desplazamiento Horizontal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            height: 100vh;
            overflow: hidden; /* Previene el scroll vertical en la página */
        }
        main {
            display: flex;
            width: 100vw;
            height: 100vh;
            overflow-x: auto; /* Habilita el scroll horizontal */
            scroll-snap-type: x mandatory; /* Fuerza el "snap" a cada sección */
            scroll-behavior: smooth;
            /* Ocultar la scrollbar */
            -ms-overflow-style: none;  /* IE y Edge */
            scrollbar-width: none;  /* Firefox */
        }
        main::-webkit-scrollbar {
            display: none; /* Chrome, Safari y Opera */
        }
        main > section {
            width: 100vw;
            height: 100vh;
            flex-shrink: 0;
            scroll-snap-align: start; /* Alinea el inicio de la sección con el viewport */
            /* Centra el contenido de cada sección */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            position: relative; /* Needed for chat layout */
        }
        header {
            position: fixed; /* Mantiene el header fijo en la parte superior */
            top: 0;
            left: 0;
            width: 100%;
            z-index: 10;
            background: rgba(249, 250, 251, 0.8);
            backdrop-filter: blur(5px);
        }
        /* Estilos específicos para el chatbot */
        #chat-container {
            height: calc(100% - 100px); /* Ajusta la altura para dejar espacio al input */
            overflow-y: auto;
            padding-bottom: 20px;
        }

        /* --- Animaciones para el chat --- */
        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-animate {
            animation: fade-in-up 0.4s ease-out forwards;
        }
        
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Encabezado Fijo -->
    <header id="main-header" class="p-4 border-b border-gray-200 transition-transform duration-300 ease-in-out">
        <div class="container mx-auto flex justify-between items-center">
            <!-- Logo - Reemplaza la URL en src con la de tu logo -->
            <img src="https://i.ibb.co/RGwxnyLv/BUHO.png" alt="Logo" class="h-12 w-auto">
            <nav class="hidden md:flex gap-6">
                <a href="#" class="hover:text-[#7b3238]">Inicio</a>
                <a href="#" class="hover:text-[#7b3238]">Productos</a>
                <a href="#" class="hover:text-[#7b3238]">Contacto</a>
            </nav>
        </div>
    </header>

    <!-- Contenido Principal con Scroll Horizontal -->
    <main>
        <!-- Sección de Bienvenida -->
        <section id="home">
            <div class="text-center">
                <h2 class="text-4xl md:text-6xl font-bold">LA APLICACIÓN PARA <span class="text-[#7b3238]">TODO</span></h2>
                <p class="text-gray-600 mt-4 text-lg">Un espacio para celebrar la confianza y la autonomía.</p>
            </div>
        </section>

        <!-- Sección WHAT -->
        <section id="what">
            <div class="max-w-3xl mx-auto text-center">
                <h3 class="text-3xl font-bold mb-8">¿QUÉ ES? (WHAT)</h3>
                <div class="text-gray-700 space-y-4">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                    <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                </div>
            </div>
        </section>

        <!-- Sección CHAT con Chatbot de Gemini -->
        <section id="chat" class="bg-gray-100 justify-start pt-24 pb-24">
             <div class="w-full max-w-4xl h-full flex flex-col">
                <h3 class="text-3xl font-bold mb-4 text-center"> </h3>
                <!-- Contenedor de mensajes del chat -->
                <div id="chat-container" class="flex-1 w-full space-y-4 p-4 rounded-lg">
                    <!-- Mensaje inicial del bot -->
                    <div class="flex items-end gap-2">
                        <img src="https://i.ibb.co/chwxgYhY/New-Project-1.png" alt="Bot Avatar" class="w-8 h-8 rounded-full">
                        <div class="bg-gray-200 text-gray-800 p-3 rounded-lg rounded-bl-none max-w-md">
                            <p>¡Hola! ¿En qué puedo ayudarte hoy?</p>
                        </div>
                    </div>
                </div>
                <!-- Formulario de entrada de texto -->
                <form id="chat-form" class="mt-4 flex items-center bg-white/10 backdrop-blur-2xl border border-white/20 rounded-full shadow-lg">
                    <input type="text" id="chat-input" class="flex-1 p-3 bg-transparent border-none focus:outline-none focus:ring-0 text-gray-800 placeholder-gray-500" placeholder="Escribe tu mensaje..." autocomplete="off">
                    <button type="submit" class="flex-shrink-0 bg-[#7b3238] text-white p-3 rounded-full m-1 hover:bg-opacity-90 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-send"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    </button>
                </form>
             </div>
        </section>
    </main>


    <!-- Menú de Navegación Móvil Inferior Fijo -->
    <nav id="mobile-nav" class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50">
        <div class="flex items-center gap-1 bg-white/20 backdrop-blur-lg border border-white/30 p-1.5 rounded-full shadow-lg">
            <a href="#home" class="nav-link w-full text-center py-2 px-6 rounded-full text-sm font-semibold text-gray-700 transition-colors duration-300">HOME</a>
            <a href="#what" class="nav-link w-full text-center py-2 px-6 rounded-full text-sm font-semibold text-gray-700 transition-colors duration-300">WHAT</a>
            <a href="#chat" class="nav-link w-full text-center py-2 px-6 rounded-full text-sm font-semibold text-gray-700 transition-colors duration-300">CHAT</a>
        </div>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const header = document.getElementById('main-header');
            const scrollContainer = document.querySelector('main');
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main > section');

            // --- Lógica de Navegación y visibilidad del Header ---
            function handleScroll() {
                if (scrollContainer.scrollLeft > window.innerWidth / 2) {
                    header.classList.add('-translate-y-full');
                } else {
                    header.classList.remove('-translate-y-full');
                }
                let currentSectionId = '';
                sections.forEach(section => {
                    const sectionLeft = section.offsetLeft;
                    const sectionWidth = section.offsetWidth;
                    if (scrollContainer.scrollLeft >= sectionLeft - sectionWidth / 2) {
                        currentSectionId = section.getAttribute('id');
                    }
                });
                navLinks.forEach(link => {
                    link.classList.remove('bg-white', 'shadow-sm');
                    const linkHref = link.getAttribute('href').substring(1);
                    if (linkHref === currentSectionId) {
                        link.classList.add('bg-white', 'shadow-sm');
                    }
                });
            }

            handleScroll();
            scrollContainer.addEventListener('scroll', handleScroll);
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetSection = document.querySelector(targetId);
                    if (targetSection) {
                        scrollContainer.scrollTo({
                            left: targetSection.offsetLeft,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // --- Lógica del Chatbot de Gemini ---
            const chatContainer = document.getElementById('chat-container');
            const chatForm = document.getElementById('chat-form');
            const chatInput = document.getElementById('chat-input');
            const chatButton = document.querySelector('#chat-form button'); // Se obtiene referencia al botón
            
            let conversationHistory = [];

            const callGeminiAPI = async (userMessage) => {
                // IMPORTANT: Leave apiKey as an empty string. It will be automatically provided during execution.
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                conversationHistory.push({ role: "user", parts: [{ text: userMessage }] });
                const payload = { contents: conversationHistory };
                
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error("API Error:", errorData);
                        addBotMessage("Lo siento, ocurrió un error al contactar al bot.");
                        return;
                    }

                    const result = await response.json();
                    const botResponse = result.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (botResponse) {
                        conversationHistory.push({ role: "model", parts: [{ text: botResponse }] });
                        addBotMessage(botResponse);
                    } else {
                        addBotMessage("No he podido procesar esa respuesta. Inténtalo de nuevo.");
                        console.error("Invalid response structure:", result);
                    }
                } catch (error) {
                    console.error('Error calling Gemini API:', error);
                    addBotMessage("Error de conexión. Por favor, revisa tu conexión a internet.");
                }
            };
            
            const addUserMessage = (message) => {
                const messageElement = document.createElement('div');
                messageElement.className = 'flex justify-end items-end gap-2 message-animate';
                messageElement.innerHTML = `
                    <div class="bg-[#7b3238] text-white p-3 rounded-lg rounded-br-none max-w-md order-1">
                        <p>${message}</p>
                    </div>
                    <img src="https://placehold.co/40x40/E2E8F0/4A5568?text=U" alt="User Avatar" class="w-8 h-8 rounded-full order-2">
                    `;
                chatContainer.appendChild(messageElement);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            };
            
            const addBotMessage = (message) => {
                const messageElement = document.createElement('div');
                messageElement.className = 'flex items-end gap-2 message-animate';

                messageElement.innerHTML = `
                    <img src="https://i.ibb.co/chwxgYhY/New-Project-1.png" alt="Bot Avatar" class="w-8 h-8 rounded-full">
                    <div class="bg-gray-200 text-gray-800 p-3 rounded-lg rounded-bl-none max-w-md">
                         <p></p>
                    </div>
                `;
                chatContainer.appendChild(messageElement);
                chatContainer.scrollTop = chatContainer.scrollHeight;

                const textElement = messageElement.querySelector('p');
                let i = 0;
                const typingSpeed = 30;

                function typeWriter() {
                    if (i < message.length) {
                        textElement.innerHTML += message.charAt(i);
                        i++;
                        chatContainer.scrollTop = chatContainer.scrollHeight;
                        setTimeout(typeWriter, typingSpeed);
                    } else {
                        // --- SE HABILITA EL FORMULARIO ---
                        chatInput.disabled = false;
                        chatButton.disabled = false;
                        chatButton.classList.remove('opacity-50', 'cursor-not-allowed');
                        chatInput.focus();
                    }
                }
                typeWriter();
            };

            chatForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const userMessage = chatInput.value.trim();
                if (userMessage) {
                    addUserMessage(userMessage);
                    chatInput.value = '';
                    
                    // --- SE DESHABILITA EL FORMULARIO ---
                    chatInput.disabled = true;
                    chatButton.disabled = true;
                    chatButton.classList.add('opacity-50', 'cursor-not-allowed');

                    callGeminiAPI(userMessage);
                }
            });
        });
    </script>

</body>
</html>

